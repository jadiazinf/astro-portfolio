import{A as m,B as w,C as g,z as l,y as x,s as p,I as h,D as A,u as S}from"./template.CT3fyaAz.js";import{c as B}from"./render.ay8f7T2c.js";function E(t){return typeof t=="function"}function W(t){return t!==null&&typeof t=="object"}const j=["string","number","bigint","boolean"];function P(t){return t==null||j.includes(typeof t)?!0:Array.isArray(t)?t.every(e=>P(e)):typeof t=="object"?Object.getPrototypeOf(t)===Object.prototype:!1}const c=Symbol("box"),a=Symbol("is-writable");function T(t){return W(t)&&c in t}function _(t){return o.isBox(t)&&a in t}function o(t){let e=m(w(t));return{[c]:!0,[a]:!0,get current(){return l(e)},set current(r){g(e,r,!0)}}}function O(t,e){const r=x(t);return e?{[c]:!0,[a]:!0,get current(){return l(r)},set current(n){e(n)}}:{[c]:!0,get current(){return t()}}}function C(t){return o.isBox(t)?t:E(t)?o.with(t):o(t)}function F(t){return Object.entries(t).reduce((e,[r,n])=>o.isBox(n)?(o.isWritableBox(n)?Object.defineProperty(e,r,{get(){return n.current},set(i){n.current=i}}):Object.defineProperty(e,r,{get(){return n.current}}),e):Object.assign(e,{[r]:n}),{})}function I(t){return o.isWritableBox(t)?{[c]:!0,get current(){return t.current}}:t}o.from=C;o.with=O;o.flatten=F;o.readonly=I;o.isBox=T;o.isWritableBox=_;function R(t,e){const r=RegExp(t,"g");return n=>{if(typeof n!="string")throw new TypeError(`expected an argument of type string, but got ${typeof n}`);return n.match(r)?n.replace(r,e):n}}const $=R(/[A-Z]/,t=>`-${t.toLowerCase()}`);function V(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError(`expected an argument of type object, but got ${typeof t}`);return Object.keys(t).map(e=>`${$(e)}: ${t[e]};`).join(`
`)}function k(t={}){return V(t).replace(`
`," ")}const L={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"};k(L);const z=typeof window<"u"?window:void 0;function D(t){let e=t.activeElement;for(;e?.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}class K{#t;#e;constructor(e={}){const{window:r=z,document:n=r?.document}=e;r!==void 0&&(this.#t=n,this.#e=B(i=>{const s=p(r,"focusin",i),u=p(r,"focusout",i);return()=>{s(),u()}}))}get current(){return this.#e?.(),this.#t?D(this.#t):null}}new K;function M(t,e){switch(t){case"post":A(e);break;case"pre":h(e);break}}function d(t,e,r,n={}){const{lazy:i=!1}=n;let s=!i,u=Array.isArray(t)?[]:void 0;M(e,()=>{const f=Array.isArray(t)?t.map(y=>y()):t();if(!s){s=!0,u=f;return}const b=S(()=>r(f,u));return u=f,b})}function U(t,e,r){d(t,"post",e,r)}function X(t,e,r){d(t,"pre",e,r)}U.pre=X;export{o as b,P as i,k as s,U as w};
